(()=>{"use strict";var e={29:(e,t,n)=>{let o,i;n.r(t),n.d(t,{deleteDB:()=>p,openDB:()=>f,unwrap:()=>m,wrap:()=>h});const r=new WeakMap,s=new WeakMap,a=new WeakMap,c=new WeakMap,d=new WeakMap;let u={get(e,t,n){if(e instanceof IDBTransaction){if("done"===t)return s.get(e);if("objectStoreNames"===t)return e.objectStoreNames||a.get(e);if("store"===t)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return h(e[t])},set:(e,t,n)=>(e[t]=n,!0),has:(e,t)=>e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e};function l(e){return"function"==typeof e?(t=e)!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(i||(i=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(t)?function(...e){return t.apply(m(this),e),h(r.get(this))}:function(...e){return h(t.apply(m(this),e))}:function(e,...n){const o=t.call(m(this),e,...n);return a.set(o,e.sort?e.sort():[e]),h(o)}:(e instanceof IDBTransaction&&function(e){if(s.has(e))return;const t=new Promise(((t,n)=>{const o=()=>{e.removeEventListener("complete",i),e.removeEventListener("error",r),e.removeEventListener("abort",r)},i=()=>{t(),o()},r=()=>{n(e.error||new DOMException("AbortError","AbortError")),o()};e.addEventListener("complete",i),e.addEventListener("error",r),e.addEventListener("abort",r)}));s.set(e,t)}(e),n=e,(o||(o=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])).some((e=>n instanceof e))?new Proxy(e,u):e);var t,n}function h(e){if(e instanceof IDBRequest)return function(e){const t=new Promise(((t,n)=>{const o=()=>{e.removeEventListener("success",i),e.removeEventListener("error",r)},i=()=>{t(h(e.result)),o()},r=()=>{n(e.error),o()};e.addEventListener("success",i),e.addEventListener("error",r)}));return t.then((t=>{t instanceof IDBCursor&&r.set(t,e)})).catch((()=>{})),d.set(t,e),t}(e);if(c.has(e))return c.get(e);const t=l(e);return t!==e&&(c.set(e,t),d.set(t,e)),t}const m=e=>d.get(e);function f(e,t,{blocked:n,upgrade:o,blocking:i,terminated:r}={}){const s=indexedDB.open(e,t),a=h(s);return o&&s.addEventListener("upgradeneeded",(e=>{o(h(s.result),e.oldVersion,e.newVersion,h(s.transaction))})),n&&s.addEventListener("blocked",(()=>n())),a.then((e=>{r&&e.addEventListener("close",(()=>r())),i&&e.addEventListener("versionchange",(()=>i()))})).catch((()=>{})),a}function p(e,{blocked:t}={}){const n=indexedDB.deleteDatabase(e);return t&&n.addEventListener("blocked",(()=>t())),h(n).then((()=>{}))}const b=["get","getKey","getAll","getAllKeys","count"],v=["put","add","delete","clear"],g=new Map;function y(e,t){if(!(e instanceof IDBDatabase)||t in e||"string"!=typeof t)return;if(g.get(t))return g.get(t);const n=t.replace(/FromIndex$/,""),o=t!==n,i=v.includes(n);if(!(n in(o?IDBIndex:IDBObjectStore).prototype)||!i&&!b.includes(n))return;const r=async function(e,...t){const r=this.transaction(e,i?"readwrite":"readonly");let s=r.store;return o&&(s=s.index(t.shift())),(await Promise.all([s[n](...t),i&&r.done]))[0]};return g.set(t,r),r}var w;w=u,u={...w,get:(e,t,n)=>y(e,t)||w.get(e,t,n),has:(e,t)=>!!y(e,t)||w.has(e,t)}},227:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),window.__cbw_geo=new class{constructor(){this.getCurrentPosition=e=>(this.ensurePositionOptions(e),new Promise(((t,n)=>{navigator.geolocation.getCurrentPosition((e=>{const n=this.wrapPosition(e);t(n)}),(e=>n(e)),e)}))),this.watchPosition=(e,t)=>(this.ensurePositionOptions(e),navigator.geolocation.watchPosition((e=>{const n=this.wrapPosition(e);t.invokeMethod("GotPosition",n)}),(e=>t.invokeMethod("OnError",e)),e)),this.ensurePositionOptions=e=>{e&&((!e.timeout||e.timeout<0)&&(e.timeout=1/0),0===e.maximumAge||e.maximumAge||(console.log("maximumAgent is null"),e.maximumAge=1/0),e.maximumAge<0&&(e.maximumAge=0))},this.wrapPosition=e=>{const t=e.coords;return{coords:{accuracy:t.accuracy,altitude:t.altitude,altitudeAccuracy:t.altitudeAccuracy,heading:t.heading,latitude:t.latitude,longitude:t.longitude,speed:t.speed},timestamp:e.timestamp}}}},window.__cbw_js_&&window.__cbw_js_.setLoadedFlag("Geolocation")},399:function(e,t,n){var o=this&&this.__awaiter||function(e,t,n,o){return new(n||(n=Promise))((function(i,r){function s(e){try{c(o.next(e))}catch(e){r(e)}}function a(e){try{c(o.throw(e))}catch(e){r(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}c((o=o.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0});const i=n(29);class r{constructor(e,t){this.options=e,this.indexedDb=t,this.upgrade=(e,t,n,o)=>{const i=this.indexedDb.invokeMethod("GetSchema",t,n);if(i&&i.length>0){for(let t of i)if(e.objectStoreNames.contains(t.name)&&o.objectStore(t.name).keyPath!=t.keyPath&&e.deleteObjectStore(t.name),e.objectStoreNames.contains(t.name)){const e=o.objectStore(t.name),n=t.indexes,i=e.indexNames;if(i.length>0)for(let t=0;t<i.length;t++){let o=i[t];n&&n.find((e=>e.name==o))?t++:e.deleteIndex(o)}if(n)for(let t of n)i.contains(t.name)||e.createIndex(t.name,t.keyPath,{unique:t.unique})}else{var r=t.keyPath?{keyPath:t.keyPath}:{autoIncrement:t.autoIncrement};const n=e.createObjectStore(t.name,r);if(t.indexes)for(let e of t.indexes)n.createIndex(e.name,e.keyPath,{unique:e.unique})}this.options.version=n,console.log(`IndexedDB ${this.options.name} has been upgraded from version ${t} to  ${n}.`)}},this.blocked=()=>{this.indexedDb.invokeMethod("OnDbEvent",s.Blocked)},this.blocking=()=>{this.indexedDb.invokeMethod("OnDbEvent",s.Blocking)},this.terminated=()=>{this.indexedDb.invokeMethod("OnDbEvent",s.Terminated)},this.getByKey=(e,t)=>o(this,void 0,void 0,(function*(){const n=this.db.transaction(e,"readonly").objectStore(e);return yield n.get(t)})),this.getAll=e=>o(this,void 0,void 0,(function*(){const t=this.db.transaction(e,"readonly").objectStore(e);return yield t.getAll()})),this.getAllByIndexValue=(e,t,n)=>o(this,void 0,void 0,(function*(){return this.db.getAllFromIndex(e,t,n)})),this.getAllKeysByIndexValue=(e,t,n)=>o(this,void 0,void 0,(function*(){return this.db.getAllKeysFromIndex(e,t,n)})),this.getAllKeys=e=>o(this,void 0,void 0,(function*(){const t=this.db.transaction(e,"readonly").objectStore(e);return yield t.getAllKeys()})),this.count=e=>o(this,void 0,void 0,(function*(){return this.db.count(e)})),this.put=(e,t)=>o(this,void 0,void 0,(function*(){const n=this.db.transaction(e,"readwrite");if(Array.isArray(t)){const e=n.store;for(const n of t)e.put(n)}else n.store.put(t);yield n.done})),this.delete=(e,t)=>o(this,void 0,void 0,(function*(){const n=this.db.transaction(e,"readwrite"),o=n.objectStore(e);if(Array.isArray(t))for(const e of t)o.delete(e);else o.delete(t);return n.complete})),this.clear=e=>o(this,void 0,void 0,(function*(){const t=this.db.transaction(e,"readwrite");return yield t.objectStore(e).clear(),t.complete}))}}var s;!function(e){e[e.Blocked=0]="Blocked",e[e.Blocking=1]="Blocking",e[e.Terminated=2]="Terminated"}(s||(s={})),window.__cbw_idb=new class{initIndexedDb(e,t){return o(this,void 0,void 0,(function*(){console.log(t);const n=new r(e,t);let o=yield i.openDB(e.name,e.version,n);o&&(n.db=o,window[e.indexedDbAgentName]=n)}))}},window.__cbw_js_&&window.__cbw_js_.setLoadedFlag("IndexedDb")},520:()=>{window.__cbw_js_=new class{constructor(){this.loadedFlags={},this.setLoadedFlag=e=>{this.loadedFlags[e]=!0},this.getLoadedFlag=e=>!!this.loadedFlags[e]}loadJsCssFile(e,t){let n;return"js"==t?(n=document.createElement("script"),n.setAttribute("type","text/javascript"),n.setAttribute("src",e)):"css"==t&&(n=document.createElement("link"),n.setAttribute("rel","stylesheet"),n.setAttribute("type","text/css"),n.setAttribute("href",e)),new Promise(((e,o)=>{null!=n?(n.onload=()=>{e("")},n.onerror=(e,t,n,i,r)=>{o(null==r?void 0:r.message)},document.body.appendChild(n)):o(`File type ${t} is not supported.`)}))}}}},t={};function n(o){var i=t[o];if(void 0!==i)return i.exports;var r=t[o]={exports:{}};return e[o].call(r.exports,r,r.exports,n),r.exports}n.d=(e,t)=>{for(var o in t)n.o(t,o)&&!n.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n(520),n(227),n(399)})();