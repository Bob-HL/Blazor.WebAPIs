(()=>{"use strict";var e={227:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),window.__cbw_geo=new class{constructor(){this.getCurrentPosition=e=>(this.ensurePositionOptions(e),new Promise(((t,n)=>{navigator.geolocation.getCurrentPosition((e=>{const n=this.wrapPosition(e);t(n)}),(e=>n(e)),e)}))),this.watchPosition=(e,t)=>(this.ensurePositionOptions(e),navigator.geolocation.watchPosition((e=>{const n=this.wrapPosition(e);t.invokeMethod("GotPosition",n)}),(e=>t.invokeMethod("OnError",e)),e)),this.ensurePositionOptions=e=>{e&&((!e.timeout||e.timeout<0)&&(e.timeout=1/0),0===e.maximumAge||e.maximumAge||(console.log("maximumAgent is null"),e.maximumAge=1/0),e.maximumAge<0&&(e.maximumAge=0))},this.wrapPosition=e=>{const t=e.coords;return{coords:{accuracy:t.accuracy,altitude:t.altitude,altitudeAccuracy:t.altitudeAccuracy,heading:t.heading,latitude:t.latitude,longitude:t.longitude,speed:t.speed},timestamp:e.timestamp}}}},window.__cbw_js_&&window.__cbw_js_.setLoadedFlag("Geolocation")},399:function(e,t,n){var o=this&&this.__awaiter||function(e,t,n,o){return new(n||(n=Promise))((function(i,r){function s(e){try{d(o.next(e))}catch(e){r(e)}}function a(e){try{d(o.throw(e))}catch(e){r(e)}}function d(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}d((o=o.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0});const i=n(424);class r{constructor(e,t){this.options=e,this.indexedDb=t,this.upgrade=(e,t,n,o,i)=>{const r=this.indexedDb.invokeMethod("GetSchema",t,n);if(r&&r.length>0){for(let t of r)if(!e.objectStoreNames.contains(t.name)||o.objectStore(t.name).keyPath==t.keyPath&&o.objectStore(t.name).autoIncrement==t.autoIncrement||e.deleteObjectStore(t.name),e.objectStoreNames.contains(t.name)){const e=o.objectStore(t.name),n=t.indexes,i=e.indexNames;if(i.length>0)for(let t=0;t<i.length;t++){let o=i[t];n&&n.find((e=>e.name==o))?t++:e.deleteIndex(o)}if(n)for(let t of n)i.contains(t.name)||e.createIndex(t.name,t.keyPath,{unique:t.unique})}else{var s={keyPath:t.keyPath,autoIncrement:t.autoIncrement};const n=e.createObjectStore(t.name,s);if(t.indexes)for(let e of t.indexes)n.createIndex(e.name,e.keyPath,{unique:e.unique})}this.options.version=n,console.log(`IndexedDB ${this.options.name} has been upgraded from version ${t} to  ${n}.`)}},this.blocked=(e,t)=>{this.indexedDb.invokeMethod("OnDbEvent",s.Blocked,e,t)},this.blocking=(e,t,n)=>{this.indexedDb.invokeMethod("OnDbEvent",s.Blocking,e,t)},this.terminated=()=>{this.indexedDb.invokeMethod("OnDbEvent",s.Terminated)},this.getByKey=(e,t)=>o(this,void 0,void 0,(function*(){const n=this.db.transaction(e,"readonly").objectStore(e);return yield n.get(t)})),this.getByKeyRange=(e,t,n,i,r)=>o(this,void 0,void 0,(function*(){let o=this.getQuery(t,n,i,r);const s=this.db.transaction(e,"readonly").objectStore(e);return yield s.get(o)})),this.getAllByKeys=(e,t)=>o(this,void 0,void 0,(function*(){const n=this.db.transaction(e,"readonly").objectStore(e);let o=[];for(const e of t){const t=yield n.get(e);t&&o.push(t)}return o})),this.getFromIndex=(e,t,n,i,r,s)=>o(this,void 0,void 0,(function*(){let o=this.getQuery(n,i,r,s);return yield this.db.getFromIndex(e,t,o)})),this.getAll=(e,t,n,i,r,s)=>o(this,void 0,void 0,(function*(){let o=this.getQuery(t,n,i,r);const a=this.db.transaction(e,"readonly").objectStore(e);return yield a.getAll(o,s)})),this.getQuery=(e,t,n,o)=>{let i=null,r=null!==n&&"undefined"!==n;return null!==e&&"undefined"!==e?i=r?IDBKeyRange.bound(e,n,t,o):IDBKeyRange.lowerBound(e,t):r&&(i=IDBKeyRange.upperBound(n,o)),i},this.getAllFromIndex=(e,t,n,i,r,s,a)=>o(this,void 0,void 0,(function*(){let o=this.getQuery(n,i,r,s);return this.db.getAllFromIndex(e,t,o,a)})),this.getAllByIndexValue=(e,t,n)=>o(this,void 0,void 0,(function*(){return this.db.getAllFromIndex(e,t,n)})),this.getAllKeysByIndexValue=(e,t,n)=>o(this,void 0,void 0,(function*(){return this.db.getAllKeysFromIndex(e,t,n)})),this.getFirstKey=(e,t,n,i,r)=>o(this,void 0,void 0,(function*(){const o=this.db.transaction(e,"readonly").objectStore(e);if(null!=t&&!n&&null===i&&!r)return yield o.getKey(t);let s=this.getQuery(t,n,i,r);return yield o.getKey(s)})),this.getAllKeys=(e,t,n,i,r,s)=>o(this,void 0,void 0,(function*(){let o=this.getQuery(t,n,i,r);const a=this.db.transaction(e,"readonly").objectStore(e);return yield a.getAllKeys(o,s)})),this.getAllKeysFromIndex=(e,t,n,i,r,s,a)=>o(this,void 0,void 0,(function*(){let o=this.getQuery(n,i,r,s);return this.db.getAllKeysFromIndex(e,t,o,a)})),this.getAllIndexValues=(e,t)=>o(this,void 0,void 0,(function*(){let n=yield this.db.transaction(e).store.index(t).openKeyCursor(),o=[];for(;n;){let e=n.key;o.indexOf(e)<0&&o.push(e),n=yield n.continue()}return o})),this.count=e=>o(this,void 0,void 0,(function*(){return this.db.count(e)})),this.put=(e,t)=>o(this,void 0,void 0,(function*(){const n=this.db.transaction(e,"readwrite"),o=n.store;let i;if(Array.isArray(t)){i=[];for(const e of t){o.autoIncrement&&!e[o.keyPath]&&delete e[o.keyPath];const t=yield o.put(e);let n={};n[o.keyPath]=t,i.push(n)}}else{o.autoIncrement&&!t[o.keyPath]&&delete t[o.keyPath];const e=yield o.put(t);i={},i[o.keyPath]=e}return yield n.done,i})),this.delete=(e,t)=>o(this,void 0,void 0,(function*(){const n=this.db.transaction(e,"readwrite"),o=n.objectStore(e);if(Array.isArray(t))for(const e of t)o.delete(e);else o.delete(t);return n.complete})),this.clear=e=>o(this,void 0,void 0,(function*(){const t=this.db.transaction(e,"readwrite");return yield t.objectStore(e).clear(),t.complete})),this.close=()=>{this.db.close()}}}var s;!function(e){e[e.Blocked=0]="Blocked",e[e.Blocking=1]="Blocking",e[e.Terminated=2]="Terminated"}(s||(s={})),window.__cbw_idb=new class{initIndexedDb(e,t){return o(this,void 0,void 0,(function*(){const n=new r(e,t);let o=e.version?e.version:void 0,s=yield i.openDB(e.name,o,n);return s?(n.db=s,window[e.indexedDbAgentName]=n,{value:s.version}):{value:0}}))}deleteIndexedDb(e,t){return o(this,void 0,void 0,(function*(){const n=new r(e,t);yield i.deleteDB(e.name,n)}))}},window.__cbw_js_&&window.__cbw_js_.setLoadedFlag("IndexedDb")},520:()=>{window.__cbw_js_=new class{constructor(){this.loadedFlags={},this.setLoadedFlag=e=>{this.loadedFlags[e]=!0},this.getLoadedFlag=e=>!!this.loadedFlags[e]}loadJsCssFile(e,t){let n;return"js"==t?(n=document.createElement("script"),n.setAttribute("type","text/javascript"),n.setAttribute("src",e)):"css"==t&&(n=document.createElement("link"),n.setAttribute("rel","stylesheet"),n.setAttribute("type","text/css"),n.setAttribute("href",e)),new Promise(((e,o)=>{null!=n?(n.onload=()=>{e("")},n.onerror=(e,t,n,i,r)=>{o(null==r?void 0:r.message)},document.body.appendChild(n)):o(`File type ${t} is not supported.`)}))}}},424:(e,t,n)=>{let o,i;n.r(t),n.d(t,{deleteDB:()=>f,openDB:()=>g,unwrap:()=>y,wrap:()=>h});const r=new WeakMap,s=new WeakMap,a=new WeakMap,d=new WeakMap,c=new WeakMap;let l={get(e,t,n){if(e instanceof IDBTransaction){if("done"===t)return s.get(e);if("objectStoreNames"===t)return e.objectStoreNames||a.get(e);if("store"===t)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return h(e[t])},set:(e,t,n)=>(e[t]=n,!0),has:(e,t)=>e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e};function u(e){return"function"==typeof e?(t=e)!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(i||(i=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(t)?function(...e){return t.apply(y(this),e),h(r.get(this))}:function(...e){return h(t.apply(y(this),e))}:function(e,...n){const o=t.call(y(this),e,...n);return a.set(o,e.sort?e.sort():[e]),h(o)}:(e instanceof IDBTransaction&&function(e){if(s.has(e))return;const t=new Promise(((t,n)=>{const o=()=>{e.removeEventListener("complete",i),e.removeEventListener("error",r),e.removeEventListener("abort",r)},i=()=>{t(),o()},r=()=>{n(e.error||new DOMException("AbortError","AbortError")),o()};e.addEventListener("complete",i),e.addEventListener("error",r),e.addEventListener("abort",r)}));s.set(e,t)}(e),n=e,(o||(o=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])).some((e=>n instanceof e))?new Proxy(e,l):e);var t,n}function h(e){if(e instanceof IDBRequest)return function(e){const t=new Promise(((t,n)=>{const o=()=>{e.removeEventListener("success",i),e.removeEventListener("error",r)},i=()=>{t(h(e.result)),o()},r=()=>{n(e.error),o()};e.addEventListener("success",i),e.addEventListener("error",r)}));return t.then((t=>{t instanceof IDBCursor&&r.set(t,e)})).catch((()=>{})),c.set(t,e),t}(e);if(d.has(e))return d.get(e);const t=u(e);return t!==e&&(d.set(e,t),c.set(t,e)),t}const y=e=>c.get(e);function g(e,t,{blocked:n,upgrade:o,blocking:i,terminated:r}={}){const s=indexedDB.open(e,t),a=h(s);return o&&s.addEventListener("upgradeneeded",(e=>{o(h(s.result),e.oldVersion,e.newVersion,h(s.transaction),e)})),n&&s.addEventListener("blocked",(e=>n(e.oldVersion,e.newVersion,e))),a.then((e=>{r&&e.addEventListener("close",(()=>r())),i&&e.addEventListener("versionchange",(e=>i(e.oldVersion,e.newVersion,e)))})).catch((()=>{})),a}function f(e,{blocked:t}={}){const n=indexedDB.deleteDatabase(e);return t&&n.addEventListener("blocked",(e=>t(e.oldVersion,e))),h(n).then((()=>{}))}const m=["get","getKey","getAll","getAllKeys","count"],v=["put","add","delete","clear"],b=new Map;function p(e,t){if(!(e instanceof IDBDatabase)||t in e||"string"!=typeof t)return;if(b.get(t))return b.get(t);const n=t.replace(/FromIndex$/,""),o=t!==n,i=v.includes(n);if(!(n in(o?IDBIndex:IDBObjectStore).prototype)||!i&&!m.includes(n))return;const r=async function(e,...t){const r=this.transaction(e,i?"readwrite":"readonly");let s=r.store;return o&&(s=s.index(t.shift())),(await Promise.all([s[n](...t),i&&r.done]))[0]};return b.set(t,r),r}var w;w=l,l={...w,get:(e,t,n)=>p(e,t)||w.get(e,t,n),has:(e,t)=>!!p(e,t)||w.has(e,t)}}},t={};function n(o){var i=t[o];if(void 0!==i)return i.exports;var r=t[o]={exports:{}};return e[o].call(r.exports,r,r.exports,n),r.exports}n.d=(e,t)=>{for(var o in t)n.o(t,o)&&!n.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n(520),n(227),n(399)})();